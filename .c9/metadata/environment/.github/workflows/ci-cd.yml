{"filter":false,"title":"ci-cd.yml","tooltip":"/.github/workflows/ci-cd.yml","undoManager":{"mark":84,"position":84,"stack":[[{"start":{"row":104,"column":77},"end":{"row":105,"column":0},"action":"remove","lines":["",""],"id":185,"ignore":true}],[{"start":{"row":104,"column":77},"end":{"row":134,"column":0},"action":"insert","lines":["","  ansible-deploy:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout repository","        uses: actions/checkout@v4","","      - name: Install Ansible","        run: |","          sudo apt update","          sudo apt install -y ansible","","      - name: Prepare SSH key for Ansible","        run: |","          echo \"${{ secrets.EB_SSH_KEY }}\" > private_key.pem","          chmod 600 private_key.pem","","      - name: Run Ansible Playbook (Datadog setup)","        run: |","          ansible-playbook \\","            -i ansible/inventories/hosts.ini \\","            --key-file private_key.pem \\","            ansible/playbooks/configure_datadog.yml",""],"id":186,"ignore":true}],[{"start":{"row":0,"column":0},"end":{"row":134,"column":0},"action":"remove","lines":["name: DevSecOps CI","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }} ","        with:","          args:","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","    - uses: actions/checkout@v4","    - name: Set up Python ${{ matrix.python-version }}","      uses: actions/setup-python@v3","      with:","        python-version: ${{ matrix.python-version }}","    - name: Install Dependencies","      run: |","        python -m pip install --upgrade pip","        pip install -r requirements.txt","    - name: Run Tests","      run: |","        python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build and push Docker image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: \"us-east-1\"","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check if Elastic Beanstalk app exists","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Skip or Run Terraform","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped (EB already deployed)","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\" ","  ansible-deploy:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout repository","        uses: actions/checkout@v4","","      - name: Install Ansible","        run: |","          sudo apt update","          sudo apt install -y ansible","","      - name: Prepare SSH key for Ansible","        run: |","          echo \"${{ secrets.EB_SSH_KEY }}\" > private_key.pem","          chmod 600 private_key.pem","","      - name: Run Ansible Playbook (Datadog setup)","        run: |","          ansible-playbook \\","            -i ansible/inventories/hosts.ini \\","            --key-file private_key.pem \\","            ansible/playbooks/configure_datadog.yml",""],"id":187},{"start":{"row":0,"column":0},"end":{"row":139,"column":0},"action":"insert","lines":["name: DevSecOps CI","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python ${{ matrix.python-version }}","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: |","          python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build and push Docker image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check if Elastic Beanstalk environment exists","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","            else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (Only if EB is not deployed)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped (EB already deployed)","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  ansible-deploy:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      DATADOG_API_KEY: ${{ secrets.DATADOG_API_KEY }}","","    steps:","      - name: Checkout repository","        uses: actions/checkout@v4","","      - name: Install Ansible","        run: |","          sudo apt update","          sudo apt install -y ansible","","      - name: Prepare SSH key for Ansible","        run: |","          echo \"${{ secrets.EB_SSH_KEY }}\" > private_key.pem","          chmod 600 private_key.pem","","      - name: Run Ansible Playbook (Datadog setup)","        run: |","          ansible-playbook \\","            -i ansible/inventories/hosts.ini \\","            --key-file private_key.pem \\","            ansible/playbooks/configure_datadog.yml",""]}],[{"start":{"row":0,"column":0},"end":{"row":139,"column":0},"action":"remove","lines":["name: DevSecOps CI","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python ${{ matrix.python-version }}","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: |","          python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build and push Docker image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check if Elastic Beanstalk environment exists","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","            else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (Only if EB is not deployed)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped (EB already deployed)","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  ansible-deploy:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      DATADOG_API_KEY: ${{ secrets.DATADOG_API_KEY }}","","    steps:","      - name: Checkout repository","        uses: actions/checkout@v4","","      - name: Install Ansible","        run: |","          sudo apt update","          sudo apt install -y ansible","","      - name: Prepare SSH key for Ansible","        run: |","          echo \"${{ secrets.EB_SSH_KEY }}\" > private_key.pem","          chmod 600 private_key.pem","","      - name: Run Ansible Playbook (Datadog setup)","        run: |","          ansible-playbook \\","            -i ansible/inventories/hosts.ini \\","            --key-file private_key.pem \\","            ansible/playbooks/configure_datadog.yml",""],"id":188},{"start":{"row":0,"column":0},"end":{"row":144,"column":0},"action":"insert","lines":["name: DevSecOps CI","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  ansible-deploy:","    runs-on: ubuntu-latest","    needs: Infrastructure","","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      DATADOG_API_KEY: ${{ secrets.DATADOG_API_KEY }}","","    steps:","      - name: Checkout repository","        uses: actions/checkout@v4","","      - name: Install Ansible + dependencies","        run: |","          sudo apt update","          sudo apt install -y ansible","","      - name: Install required Ansible roles","        run: |","          ansible-galaxy install -r ansible/requirements.yml","","      - name: Prepare SSH key for Ansible","        run: |","          echo \"${{ secrets.EB_SSH_KEY }}\" > private_key.pem","          chmod 600 private_key.pem","","      - name: Run Datadog Playbook","        run: |","          ansible-playbook \\","            -i ansible/inventories/hosts.ini \\","            --key-file private_key.pem \\","            ansible/playbooks/configure_datadog.yml",""]}],[{"start":{"row":109,"column":2},"end":{"row":109,"column":4},"action":"insert","lines":["# "],"id":189},{"start":{"row":110,"column":2},"end":{"row":110,"column":4},"action":"insert","lines":["# "]},{"start":{"row":111,"column":2},"end":{"row":111,"column":4},"action":"insert","lines":["# "]},{"start":{"row":113,"column":2},"end":{"row":113,"column":4},"action":"insert","lines":["# "]},{"start":{"row":114,"column":2},"end":{"row":114,"column":4},"action":"insert","lines":["# "]},{"start":{"row":115,"column":2},"end":{"row":115,"column":4},"action":"insert","lines":["# "]},{"start":{"row":116,"column":2},"end":{"row":116,"column":4},"action":"insert","lines":["# "]},{"start":{"row":117,"column":2},"end":{"row":117,"column":4},"action":"insert","lines":["# "]},{"start":{"row":118,"column":2},"end":{"row":118,"column":4},"action":"insert","lines":["# "]},{"start":{"row":120,"column":2},"end":{"row":120,"column":4},"action":"insert","lines":["# "]},{"start":{"row":121,"column":2},"end":{"row":121,"column":4},"action":"insert","lines":["# "]},{"start":{"row":122,"column":2},"end":{"row":122,"column":4},"action":"insert","lines":["# "]},{"start":{"row":124,"column":2},"end":{"row":124,"column":4},"action":"insert","lines":["# "]},{"start":{"row":125,"column":2},"end":{"row":125,"column":4},"action":"insert","lines":["# "]},{"start":{"row":126,"column":2},"end":{"row":126,"column":4},"action":"insert","lines":["# "]},{"start":{"row":127,"column":2},"end":{"row":127,"column":4},"action":"insert","lines":["# "]},{"start":{"row":129,"column":2},"end":{"row":129,"column":4},"action":"insert","lines":["# "]},{"start":{"row":130,"column":2},"end":{"row":130,"column":4},"action":"insert","lines":["# "]},{"start":{"row":131,"column":2},"end":{"row":131,"column":4},"action":"insert","lines":["# "]},{"start":{"row":133,"column":2},"end":{"row":133,"column":4},"action":"insert","lines":["# "]},{"start":{"row":134,"column":2},"end":{"row":134,"column":4},"action":"insert","lines":["# "]},{"start":{"row":135,"column":2},"end":{"row":135,"column":4},"action":"insert","lines":["# "]},{"start":{"row":136,"column":2},"end":{"row":136,"column":4},"action":"insert","lines":["# "]},{"start":{"row":138,"column":2},"end":{"row":138,"column":4},"action":"insert","lines":["# "]},{"start":{"row":139,"column":2},"end":{"row":139,"column":4},"action":"insert","lines":["# "]},{"start":{"row":140,"column":2},"end":{"row":140,"column":4},"action":"insert","lines":["# "]},{"start":{"row":141,"column":2},"end":{"row":141,"column":4},"action":"insert","lines":["# "]},{"start":{"row":142,"column":2},"end":{"row":142,"column":4},"action":"insert","lines":["# "]},{"start":{"row":143,"column":2},"end":{"row":143,"column":4},"action":"insert","lines":["# "]}],[{"start":{"row":0,"column":0},"end":{"row":144,"column":0},"action":"remove","lines":["name: DevSecOps CI","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  # ansible-deploy:","  #   runs-on: ubuntu-latest","  #   needs: Infrastructure","","  #   env:","  #     AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","  #     AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","  #     AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","  #     AWS_REGION: us-east-1","  #     DATADOG_API_KEY: ${{ secrets.DATADOG_API_KEY }}","","  #   steps:","  #     - name: Checkout repository","  #       uses: actions/checkout@v4","","  #     - name: Install Ansible + dependencies","  #       run: |","  #         sudo apt update","  #         sudo apt install -y ansible","","  #     - name: Install required Ansible roles","  #       run: |","  #         ansible-galaxy install -r ansible/requirements.yml","","  #     - name: Prepare SSH key for Ansible","  #       run: |","  #         echo \"${{ secrets.EB_SSH_KEY }}\" > private_key.pem","  #         chmod 600 private_key.pem","","  #     - name: Run Datadog Playbook","  #       run: |","  #         ansible-playbook \\","  #           -i ansible/inventories/hosts.ini \\","  #           --key-file private_key.pem \\","  #           ansible/playbooks/configure_datadog.yml",""],"id":190},{"start":{"row":0,"column":0},"end":{"row":189,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  eb-deploy:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: \"us-east-1\"","      DOCKER_IMAGE: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","      EB_APP_NAME: \"storemanagement\"","      EB_ENV_NAME: \"storemanagement-env\"","      S3_BUCKET: \"eb-deployments-${{ secrets.AWS_ACCOUNT_ID }}\" # Create an S3 bucket for deployments","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install dependencies","        run: |","          sudo apt update","          sudo apt install -y unzip zip curl","","      - name: Install AWS CLI v2","        run: |","          curl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"","          unzip awscliv2.zip","          sudo ./aws/install","          aws --version","","      - name: Configure AWS CLI","        run: |","          aws configure set aws_access_key_id $AWS_ACCESS_KEY_ID","          aws configure set aws_secret_access_key $AWS_SECRET_ACCESS_KEY","          aws configure set region $AWS_REGION","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"$DOCKER_IMAGE\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {\"ContainerPort\": \"8000\"}","            ]","          }' > Dockerrun.aws.json","","      - name: Zip Dockerrun file","        run: zip -r eb-deploy.zip Dockerrun.aws.json","","      - name: Upload to S3","        run: |","          aws s3 cp eb-deploy.zip s3://$S3_BUCKET/eb-deploy.zip","","      - name: Deploy to Elastic Beanstalk","        run: |","          VERSION_LABEL=\"v-$(date +%Y%m%d%H%M%S)\"","","          aws elasticbeanstalk create-application-version \\","            --application-name \"$EB_APP_NAME\" \\","            --version-label \"$VERSION_LABEL\" \\","            --source-bundle S3Bucket=\"$S3_BUCKET\",S3Key=\"eb-deploy.zip\"","","          if aws elasticbeanstalk describe-environments \\","              --application-name \"$EB_APP_NAME\" \\","              --environment-names \"$EB_ENV_NAME\" \\","              --no-include-deleted | grep -q \"$EB_ENV_NAME\"; then","              echo \"Updating existing EB environment...\"","              aws elasticbeanstalk update-environment \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\"","          else","              echo \"Creating new EB environment...\"","              aws elasticbeanstalk create-environment \\","                --application-name \"$EB_APP_NAME\" \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\" \\","                --solution-stack-name \"64bit Amazon Linux 2 v5.7.6 running Docker\"","          fi",""]}],[{"start":{"row":109,"column":0},"end":{"row":189,"column":0},"action":"remove","lines":["  eb-deploy:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: \"us-east-1\"","      DOCKER_IMAGE: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","      EB_APP_NAME: \"storemanagement\"","      EB_ENV_NAME: \"storemanagement-env\"","      S3_BUCKET: \"eb-deployments-${{ secrets.AWS_ACCOUNT_ID }}\" # Create an S3 bucket for deployments","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install dependencies","        run: |","          sudo apt update","          sudo apt install -y unzip zip curl","","      - name: Install AWS CLI v2","        run: |","          curl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"","          unzip awscliv2.zip","          sudo ./aws/install","          aws --version","","      - name: Configure AWS CLI","        run: |","          aws configure set aws_access_key_id $AWS_ACCESS_KEY_ID","          aws configure set aws_secret_access_key $AWS_SECRET_ACCESS_KEY","          aws configure set region $AWS_REGION","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"$DOCKER_IMAGE\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {\"ContainerPort\": \"8000\"}","            ]","          }' > Dockerrun.aws.json","","      - name: Zip Dockerrun file","        run: zip -r eb-deploy.zip Dockerrun.aws.json","","      - name: Upload to S3","        run: |","          aws s3 cp eb-deploy.zip s3://$S3_BUCKET/eb-deploy.zip","","      - name: Deploy to Elastic Beanstalk","        run: |","          VERSION_LABEL=\"v-$(date +%Y%m%d%H%M%S)\"","","          aws elasticbeanstalk create-application-version \\","            --application-name \"$EB_APP_NAME\" \\","            --version-label \"$VERSION_LABEL\" \\","            --source-bundle S3Bucket=\"$S3_BUCKET\",S3Key=\"eb-deploy.zip\"","","          if aws elasticbeanstalk describe-environments \\","              --application-name \"$EB_APP_NAME\" \\","              --environment-names \"$EB_ENV_NAME\" \\","              --no-include-deleted | grep -q \"$EB_ENV_NAME\"; then","              echo \"Updating existing EB environment...\"","              aws elasticbeanstalk update-environment \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\"","          else","              echo \"Creating new EB environment...\"","              aws elasticbeanstalk create-environment \\","                --application-name \"$EB_APP_NAME\" \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\" \\","                --solution-stack-name \"64bit Amazon Linux 2 v5.7.6 running Docker\"","          fi",""],"id":191},{"start":{"row":109,"column":0},"end":{"row":184,"column":0},"action":"insert","lines":["  eb-deploy:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: \"us-east-1\"","      DOCKER_IMAGE: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","      EB_APP_NAME: \"storemanagement\"","      EB_ENV_NAME: \"storemanagement-env\"","      S3_BUCKET: \"eb-deployments-${{ secrets.AWS_ACCOUNT_ID }}\" # Make sure this exists","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install dependencies","        run: |","          sudo apt update","          sudo apt install -y unzip zip","","      # Skip AWS CLI install since it is preinstalled","      - name: Verify AWS CLI","        run: aws --version","","      - name: Configure AWS CLI","        run: |","          aws configure set aws_access_key_id $AWS_ACCESS_KEY_ID","          aws configure set aws_secret_access_key $AWS_SECRET_ACCESS_KEY","          aws configure set region $AWS_REGION","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"$DOCKER_IMAGE\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {\"ContainerPort\": \"8000\"}","            ]","          }' > Dockerrun.aws.json","","      - name: Zip Dockerrun file","        run: zip -r eb-deploy.zip Dockerrun.aws.json","","      - name: Upload to S3","        run: |","          aws s3 cp eb-deploy.zip s3://$S3_BUCKET/eb-deploy.zip","","      - name: Deploy to Elastic Beanstalk","        run: |","          VERSION_LABEL=\"v-$(date +%Y%m%d%H%M%S)\"","          aws elasticbeanstalk create-application-version \\","            --application-name \"$EB_APP_NAME\" \\","            --version-label \"$VERSION_LABEL\" \\","            --source-bundle S3Bucket=\"$S3_BUCKET\",S3Key=\"eb-deploy.zip\"","","          if aws elasticbeanstalk describe-environments \\","              --application-name \"$EB_APP_NAME\" \\","              --environment-names \"$EB_ENV_NAME\" \\","              --no-include-deleted | grep -q \"$EB_ENV_NAME\"; then","              echo \"Updating existing EB environment...\"","              aws elasticbeanstalk update-environment \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\"","          else","              echo \"Creating new EB environment...\"","              aws elasticbeanstalk create-environment \\","                --application-name \"$EB_APP_NAME\" \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\" \\","                --solution-stack-name \"64bit Amazon Linux 2 v5.7.6 running Docker\"",""]}],[{"start":{"row":0,"column":0},"end":{"row":184,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  eb-deploy:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: \"us-east-1\"","      DOCKER_IMAGE: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","      EB_APP_NAME: \"storemanagement\"","      EB_ENV_NAME: \"storemanagement-env\"","      S3_BUCKET: \"eb-deployments-${{ secrets.AWS_ACCOUNT_ID }}\" # Make sure this exists","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install dependencies","        run: |","          sudo apt update","          sudo apt install -y unzip zip","","      # Skip AWS CLI install since it is preinstalled","      - name: Verify AWS CLI","        run: aws --version","","      - name: Configure AWS CLI","        run: |","          aws configure set aws_access_key_id $AWS_ACCESS_KEY_ID","          aws configure set aws_secret_access_key $AWS_SECRET_ACCESS_KEY","          aws configure set region $AWS_REGION","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"$DOCKER_IMAGE\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {\"ContainerPort\": \"8000\"}","            ]","          }' > Dockerrun.aws.json","","      - name: Zip Dockerrun file","        run: zip -r eb-deploy.zip Dockerrun.aws.json","","      - name: Upload to S3","        run: |","          aws s3 cp eb-deploy.zip s3://$S3_BUCKET/eb-deploy.zip","","      - name: Deploy to Elastic Beanstalk","        run: |","          VERSION_LABEL=\"v-$(date +%Y%m%d%H%M%S)\"","          aws elasticbeanstalk create-application-version \\","            --application-name \"$EB_APP_NAME\" \\","            --version-label \"$VERSION_LABEL\" \\","            --source-bundle S3Bucket=\"$S3_BUCKET\",S3Key=\"eb-deploy.zip\"","","          if aws elasticbeanstalk describe-environments \\","              --application-name \"$EB_APP_NAME\" \\","              --environment-names \"$EB_ENV_NAME\" \\","              --no-include-deleted | grep -q \"$EB_ENV_NAME\"; then","              echo \"Updating existing EB environment...\"","              aws elasticbeanstalk update-environment \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\"","          else","              echo \"Creating new EB environment...\"","              aws elasticbeanstalk create-environment \\","                --application-name \"$EB_APP_NAME\" \\","                --environment-name \"$EB_ENV_NAME\" \\","                --version-label \"$VERSION_LABEL\" \\","                --solution-stack-name \"64bit Amazon Linux 2 v5.7.6 running Docker\"",""],"id":192},{"start":{"row":0,"column":0},"end":{"row":132,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"$DOCKERHUB_IMAGE\"'\"_",""]}],[{"start":{"row":126,"column":7},"end":{"row":131,"column":45},"action":"remove","lines":[" name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"$DOCKERHUB_IMAGE\"'\"_"],"id":193},{"start":{"row":126,"column":7},"end":{"row":142,"column":0},"action":"insert","lines":["- name: Create Dockerrun.aws.json","  run: |","    cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF",""]}],[{"start":{"row":126,"column":6},"end":{"row":126,"column":7},"action":"remove","lines":["-"],"id":194}],[{"start":{"row":127,"column":2},"end":{"row":127,"column":4},"action":"insert","lines":["  "],"id":195}],[{"start":{"row":127,"column":4},"end":{"row":127,"column":6},"action":"insert","lines":["  "],"id":196}],[{"start":{"row":127,"column":6},"end":{"row":127,"column":8},"action":"insert","lines":["  "],"id":197}],[{"start":{"row":128,"column":4},"end":{"row":128,"column":6},"action":"insert","lines":["  "],"id":198}],[{"start":{"row":128,"column":6},"end":{"row":128,"column":8},"action":"insert","lines":["  "],"id":199}],[{"start":{"row":128,"column":8},"end":{"row":128,"column":10},"action":"insert","lines":["  "],"id":200}],[{"start":{"row":129,"column":0},"end":{"row":129,"column":2},"action":"insert","lines":["  "],"id":201}],[{"start":{"row":129,"column":2},"end":{"row":129,"column":4},"action":"insert","lines":["  "],"id":202}],[{"start":{"row":129,"column":4},"end":{"row":129,"column":6},"action":"insert","lines":["  "],"id":203}],[{"start":{"row":130,"column":2},"end":{"row":130,"column":4},"action":"insert","lines":["  "],"id":204}],[{"start":{"row":130,"column":4},"end":{"row":130,"column":6},"action":"insert","lines":["  "],"id":205}],[{"start":{"row":130,"column":6},"end":{"row":130,"column":8},"action":"insert","lines":["  "],"id":206}],[{"start":{"row":131,"column":2},"end":{"row":131,"column":4},"action":"insert","lines":["  "],"id":207}],[{"start":{"row":131,"column":4},"end":{"row":131,"column":6},"action":"insert","lines":["  "],"id":208}],[{"start":{"row":131,"column":6},"end":{"row":131,"column":8},"action":"insert","lines":["  "],"id":209}],[{"start":{"row":132,"column":4},"end":{"row":132,"column":6},"action":"insert","lines":["  "],"id":210}],[{"start":{"row":132,"column":6},"end":{"row":132,"column":8},"action":"insert","lines":["  "],"id":211}],[{"start":{"row":132,"column":8},"end":{"row":132,"column":10},"action":"insert","lines":["  "],"id":212}],[{"start":{"row":133,"column":4},"end":{"row":133,"column":6},"action":"insert","lines":["  "],"id":213}],[{"start":{"row":133,"column":6},"end":{"row":133,"column":8},"action":"insert","lines":["  "],"id":214}],[{"start":{"row":133,"column":8},"end":{"row":133,"column":10},"action":"insert","lines":["  "],"id":215}],[{"start":{"row":134,"column":2},"end":{"row":134,"column":4},"action":"insert","lines":["  "],"id":216}],[{"start":{"row":134,"column":4},"end":{"row":134,"column":6},"action":"insert","lines":["  "],"id":217}],[{"start":{"row":134,"column":6},"end":{"row":134,"column":8},"action":"insert","lines":["  "],"id":218}],[{"start":{"row":135,"column":2},"end":{"row":135,"column":4},"action":"insert","lines":["  "],"id":219}],[{"start":{"row":135,"column":4},"end":{"row":135,"column":6},"action":"insert","lines":["  "],"id":220}],[{"start":{"row":135,"column":6},"end":{"row":135,"column":8},"action":"insert","lines":["  "],"id":221}],[{"start":{"row":136,"column":4},"end":{"row":136,"column":6},"action":"insert","lines":["  "],"id":222}],[{"start":{"row":136,"column":6},"end":{"row":136,"column":8},"action":"insert","lines":["  "],"id":223}],[{"start":{"row":136,"column":8},"end":{"row":136,"column":10},"action":"insert","lines":["  "],"id":224}],[{"start":{"row":137,"column":6},"end":{"row":137,"column":8},"action":"insert","lines":["  "],"id":225}],[{"start":{"row":137,"column":8},"end":{"row":137,"column":10},"action":"insert","lines":["  "],"id":226}],[{"start":{"row":137,"column":10},"end":{"row":137,"column":12},"action":"insert","lines":["  "],"id":227}],[{"start":{"row":137,"column":12},"end":{"row":137,"column":14},"action":"insert","lines":["  "],"id":228}],[{"start":{"row":137,"column":12},"end":{"row":137,"column":14},"action":"remove","lines":["  "],"id":229}],[{"start":{"row":138,"column":4},"end":{"row":138,"column":6},"action":"insert","lines":["  "],"id":230}],[{"start":{"row":138,"column":6},"end":{"row":138,"column":8},"action":"insert","lines":["  "],"id":231}],[{"start":{"row":138,"column":8},"end":{"row":138,"column":10},"action":"insert","lines":["  "],"id":232}],[{"start":{"row":139,"column":2},"end":{"row":139,"column":4},"action":"insert","lines":["  "],"id":233}],[{"start":{"row":139,"column":4},"end":{"row":139,"column":6},"action":"insert","lines":["  "],"id":234}],[{"start":{"row":139,"column":6},"end":{"row":139,"column":8},"action":"insert","lines":["  "],"id":235}],[{"start":{"row":140,"column":0},"end":{"row":140,"column":2},"action":"insert","lines":["  "],"id":236}],[{"start":{"row":140,"column":2},"end":{"row":140,"column":4},"action":"insert","lines":["  "],"id":237}],[{"start":{"row":140,"column":4},"end":{"row":140,"column":6},"action":"insert","lines":["  "],"id":238}],[{"start":{"row":141,"column":0},"end":{"row":141,"column":2},"action":"insert","lines":["  "],"id":239}],[{"start":{"row":141,"column":2},"end":{"row":141,"column":4},"action":"insert","lines":["  "],"id":240}],[{"start":{"row":141,"column":4},"end":{"row":141,"column":6},"action":"insert","lines":["  "],"id":241}],[{"start":{"row":0,"column":0},"end":{"row":143,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","      {","        \"AWSEBDockerrunVersion\": \"1\",","        \"Image\": {","          \"Name\": \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\",","          \"Update\": \"true\"","        },","        \"Ports\": [","          {","            \"ContainerPort\": \"8000\"","          }","        ]","      }","      EOF","",""],"id":242},{"start":{"row":0,"column":0},"end":{"row":97,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.ex_",""]}],[{"start":{"row":0,"column":0},"end":{"row":97,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.ex_",""],"id":243},{"start":{"row":0,"column":0},"end":{"row":150,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION --platform docker","          eb use $EB_ENV_NAME","          eb deploy",""]}],[{"start":{"row":0,"column":0},"end":{"row":150,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION --platform docker","          eb use $EB_ENV_NAME","          eb deploy",""],"id":244},{"start":{"row":0,"column":0},"end":{"row":150,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION --platform docker","          eb use $EB_ENV_NAME","          eb deploy",""]}],[{"start":{"row":0,"column":0},"end":{"row":150,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION --platform docker","          eb use $EB_ENV_NAME","          eb deploy",""],"id":245},{"start":{"row":0,"column":0},"end":{"row":148,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","            echo \"exists=true\" >> $GITHUB_OUTPUT","          else","            echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION --platform docker","          eb use $EB_ENV_NAME","          eb deploy",""]}],[{"start":{"row":0,"column":0},"end":{"row":148,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","            echo \"exists=true\" >> $GITHUB_OUTPUT","          else","            echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION --platform docker","          eb use $EB_ENV_NAME","          eb deploy",""],"id":246},{"start":{"row":0,"column":0},"end":{"row":148,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION","          eb use $EB_ENV_NAME","          eb deploy",""]}],[{"start":{"row":0,"column":0},"end":{"row":148,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION","          eb use $EB_ENV_NAME","          eb deploy",""],"id":247},{"start":{"row":0,"column":0},"end":{"row":146,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION","          eb use $EB_ENV_NAME","          eb deploy",""]}],[{"start":{"row":144,"column":17},"end":{"row":144,"column":29},"action":"remove","lines":["$EB_ENV_NAME"],"id":248}],[{"start":{"row":145,"column":19},"end":{"row":145,"column":20},"action":"insert","lines":[" "],"id":249}],[{"start":{"row":145,"column":20},"end":{"row":145,"column":32},"action":"insert","lines":["$EB_ENV_NAME"],"id":250}],[{"start":{"row":142,"column":14},"end":{"row":144,"column":17},"action":"remove","lines":["","          eb init $EB_APP_NAME --region $AWS_REGION","          eb use "],"id":251}],[{"start":{"row":144,"column":0},"end":{"row":154,"column":17},"action":"insert","lines":["    - name: Initialize EB CLI","      run: |","        eb init $EB_APP_NAME \\","          --region $AWS_REGION \\","          --platform \"64bit Amazon Linux 2023 v4.8.0 running Python 3.14\" \\","          --interactive false","","    - name: Deploy to Elastic Beanstalk","      run: |","        eb use $EB_ENV_NAME","        eb deploy"],"id":252}],[{"start":{"row":144,"column":0},"end":{"row":144,"column":2},"action":"insert","lines":["  "],"id":253},{"start":{"row":145,"column":0},"end":{"row":145,"column":2},"action":"insert","lines":["  "]},{"start":{"row":146,"column":0},"end":{"row":146,"column":2},"action":"insert","lines":["  "]},{"start":{"row":147,"column":0},"end":{"row":147,"column":2},"action":"insert","lines":["  "]},{"start":{"row":148,"column":0},"end":{"row":148,"column":2},"action":"insert","lines":["  "]},{"start":{"row":149,"column":0},"end":{"row":149,"column":2},"action":"insert","lines":["  "]},{"start":{"row":150,"column":0},"end":{"row":150,"column":2},"action":"insert","lines":["  "]},{"start":{"row":151,"column":0},"end":{"row":151,"column":2},"action":"insert","lines":["  "]},{"start":{"row":152,"column":0},"end":{"row":152,"column":2},"action":"insert","lines":["  "]},{"start":{"row":153,"column":0},"end":{"row":153,"column":2},"action":"insert","lines":["  "]},{"start":{"row":154,"column":0},"end":{"row":154,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":0,"column":0},"end":{"row":154,"column":19},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb deploy $EB_ENV_NAME","      - name: Initialize EB CLI","        run: |","          eb init $EB_APP_NAME \\","            --region $AWS_REGION \\","            --platform \"64bit Amazon Linux 2023 v4.8.0 running Python 3.14\" \\","            --interactive false","  ","      - name: Deploy to Elastic Beanstalk","        run: |","          eb use $EB_ENV_NAME","          eb deploy"],"id":254},{"start":{"row":0,"column":0},"end":{"row":137,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Terraform Init & Apply","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"store-management-app\"","      EB_ENV_NAME: \"store-management-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","      S3_BUCKET: \"your-eb-bucket\"  # Replace with your S3 bucket for EB deployments","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Upload Dockerrun to S3","        run: |","          aws s3 cp Dockerrun.aws.json s3://${S3_BUCKET}/Dockerrun.aws.json","","      - name: Create new EB application version","        run: |","          aws elasticbeanstalk create-application-version \\","            --application-name $EB_APP_NAME \\","            --version-label github-${GITHUB_SHA} \\","            --source-bundle S3Bucket=\"${S3_BUCKET}\",S3Key=\"Dockerrun.aws.json\"","","      - name: Update EB environment","        run: |","          aws elasticbeanstalk update-environment \\","            --environment-name $EB_ENV_NAME \\","            --version-label github-${GITHUB_SHA}",""]}],[{"start":{"row":0,"column":0},"end":{"row":137,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Terraform Init & Apply","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"store-management-app\"","      EB_ENV_NAME: \"store-management-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","      S3_BUCKET: \"your-eb-bucket\"  # Replace with your S3 bucket for EB deployments","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Upload Dockerrun to S3","        run: |","          aws s3 cp Dockerrun.aws.json s3://${S3_BUCKET}/Dockerrun.aws.json","","      - name: Create new EB application version","        run: |","          aws elasticbeanstalk create-application-version \\","            --application-name $EB_APP_NAME \\","            --version-label github-${GITHUB_SHA} \\","            --source-bundle S3Bucket=\"${S3_BUCKET}\",S3Key=\"Dockerrun.aws.json\"","","      - name: Update EB environment","        run: |","          aws elasticbeanstalk update-environment \\","            --environment-name $EB_ENV_NAME \\","            --version-label github-${GITHUB_SHA}",""],"id":255},{"start":{"row":0,"column":0},"end":{"row":152,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  # --------------------------","  # 1️⃣ SonarCloud Analysis","  # --------------------------","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  # --------------------------","  # 2️⃣ Python Build & Test","  # --------------------------","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  # --------------------------","  # 3️⃣ Docker Build & Push","  # --------------------------","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  # --------------------------","  # 4️⃣ Terraform Infrastructure","  # --------------------------","  infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Terraform Init & Apply","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","  # --------------------------","  # 5️⃣ Deploy Docker to EB","  # --------------------------","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"store-management-app\"","      EB_ENV_NAME: \"store-management-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","      S3_BUCKET: \"your-eb-bucket\"  # Replace with your S3 bucket","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Upload Dockerrun to S3","        run: |","          aws s3 cp Dockerrun.aws.json s3://${S3_BUCKET}/Dockerrun-${GITHUB_SHA}.json","","      - name: Create new EB application version","        run: |","          aws elasticbeanstalk create-application-version \\","            --application-name $EB_APP_NAME \\","            --version-label github-${GITHUB_SHA} \\","            --source-bundle S3Bucket=\"${S3_BUCKET}\",S3Key=\"Dockerrun-${GITHUB_SHA}.json\"","","      - name: Update EB environment","        run: |","          aws elasticbeanstalk update-environment \\","            --environment-name $EB_ENV_NAME \\","            --version-label github-${GITHUB_SHA}",""]}],[{"start":{"row":10,"column":2},"end":{"row":10,"column":4},"action":"insert","lines":["# "],"id":256},{"start":{"row":11,"column":2},"end":{"row":11,"column":4},"action":"insert","lines":["# "]},{"start":{"row":12,"column":2},"end":{"row":12,"column":4},"action":"insert","lines":["# "]},{"start":{"row":13,"column":2},"end":{"row":13,"column":4},"action":"insert","lines":["# "]},{"start":{"row":14,"column":2},"end":{"row":14,"column":4},"action":"insert","lines":["# "]},{"start":{"row":15,"column":2},"end":{"row":15,"column":4},"action":"insert","lines":["# "]},{"start":{"row":16,"column":2},"end":{"row":16,"column":4},"action":"insert","lines":["# "]},{"start":{"row":17,"column":2},"end":{"row":17,"column":4},"action":"insert","lines":["# "]},{"start":{"row":19,"column":2},"end":{"row":19,"column":4},"action":"insert","lines":["# "]},{"start":{"row":20,"column":2},"end":{"row":20,"column":4},"action":"insert","lines":["# "]},{"start":{"row":21,"column":2},"end":{"row":21,"column":4},"action":"insert","lines":["# "]},{"start":{"row":22,"column":2},"end":{"row":22,"column":4},"action":"insert","lines":["# "]},{"start":{"row":23,"column":2},"end":{"row":23,"column":4},"action":"insert","lines":["# "]},{"start":{"row":24,"column":2},"end":{"row":24,"column":4},"action":"insert","lines":["# "]},{"start":{"row":25,"column":2},"end":{"row":25,"column":4},"action":"insert","lines":["# "]},{"start":{"row":26,"column":2},"end":{"row":26,"column":4},"action":"insert","lines":["# "]}],[{"start":{"row":33,"column":4},"end":{"row":33,"column":6},"action":"insert","lines":["# "],"id":257}],[{"start":{"row":0,"column":0},"end":{"row":152,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  # # --------------------------","  # # 1️⃣ SonarCloud Analysis","  # # --------------------------","  # sonar-cloud-build:","  #   runs-on: ubuntu-latest","  #   steps:","  #     - name: Checkout code","  #       uses: actions/checkout@v4","","  #     - name: Analyze with SonarCloud","  #       uses: SonarSource/sonarcloud-github-action@v2","  #       env:","  #         SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","  #       with:","  #         args: >","  #           -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","  #           -Dsonar.organization=prayas-sharmaa","","  # --------------------------","  # 2️⃣ Python Build & Test","  # --------------------------","  python-build:","    runs-on: ubuntu-latest","    # needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  # --------------------------","  # 3️⃣ Docker Build & Push","  # --------------------------","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  # --------------------------","  # 4️⃣ Terraform Infrastructure","  # --------------------------","  infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Terraform Init & Apply","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","  # --------------------------","  # 5️⃣ Deploy Docker to EB","  # --------------------------","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"store-management-app\"","      EB_ENV_NAME: \"store-management-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","      S3_BUCKET: \"your-eb-bucket\"  # Replace with your S3 bucket","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Upload Dockerrun to S3","        run: |","          aws s3 cp Dockerrun.aws.json s3://${S3_BUCKET}/Dockerrun-${GITHUB_SHA}.json","","      - name: Create new EB application version","        run: |","          aws elasticbeanstalk create-application-version \\","            --application-name $EB_APP_NAME \\","            --version-label github-${GITHUB_SHA} \\","            --source-bundle S3Bucket=\"${S3_BUCKET}\",S3Key=\"Dockerrun-${GITHUB_SHA}.json\"","","      - name: Update EB environment","        run: |","          aws elasticbeanstalk update-environment \\","            --environment-name $EB_ENV_NAME \\","            --version-label github-${GITHUB_SHA}",""],"id":258},{"start":{"row":0,"column":0},"end":{"row":148,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION","          eb use $EB_ENV_NAME","          eb deploy",""]}],[{"start":{"row":10,"column":2},"end":{"row":10,"column":4},"action":"insert","lines":["# "],"id":259},{"start":{"row":11,"column":2},"end":{"row":11,"column":4},"action":"insert","lines":["# "]},{"start":{"row":12,"column":2},"end":{"row":12,"column":4},"action":"insert","lines":["# "]},{"start":{"row":13,"column":2},"end":{"row":13,"column":4},"action":"insert","lines":["# "]},{"start":{"row":14,"column":2},"end":{"row":14,"column":4},"action":"insert","lines":["# "]},{"start":{"row":16,"column":2},"end":{"row":16,"column":4},"action":"insert","lines":["# "]},{"start":{"row":17,"column":2},"end":{"row":17,"column":4},"action":"insert","lines":["# "]},{"start":{"row":18,"column":2},"end":{"row":18,"column":4},"action":"insert","lines":["# "]},{"start":{"row":19,"column":2},"end":{"row":19,"column":4},"action":"insert","lines":["# "]},{"start":{"row":20,"column":2},"end":{"row":20,"column":4},"action":"insert","lines":["# "]},{"start":{"row":21,"column":2},"end":{"row":21,"column":4},"action":"insert","lines":["# "]},{"start":{"row":22,"column":2},"end":{"row":22,"column":4},"action":"insert","lines":["# "]},{"start":{"row":23,"column":2},"end":{"row":23,"column":4},"action":"insert","lines":["# "]}],[{"start":{"row":27,"column":4},"end":{"row":27,"column":6},"action":"insert","lines":["# "],"id":260}],[{"start":{"row":0,"column":0},"end":{"row":148,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  # sonar-cloud-build:","  #   runs-on: ubuntu-latest","  #   steps:","  #     - name: Checkout code","  #       uses: actions/checkout@v4","","  #     - name: Analyze with SonarCloud","  #       uses: SonarSource/sonarcloud-github-action@v2","  #       env:","  #         SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","  #       with:","  #         args: >","  #           -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","  #           -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    # needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check EB environment","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Apply Terraform (deploy only once)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"storemanagement-app\"","      EB_ENV_NAME: \"storemanagement-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          python -m pip install --upgrade pip","          pip install awsebcli","","      - name: Create Dockerrun.aws.json","        run: |","          cat > Dockerrun.aws.json <<EOF","{","  \"AWSEBDockerrunVersion\": \"1\",","  \"Image\": {","    \"Name\": \"${DOCKERHUB_IMAGE}\",","    \"Update\": \"true\"","  },","  \"Ports\": [","    {","      \"ContainerPort\": \"8000\"","    }","  ]","}","EOF","","      - name: Deploy to Elastic Beanstalk","        run: |","          eb init $EB_APP_NAME --region $AWS_REGION","          eb use $EB_ENV_NAME","          eb deploy",""],"id":261},{"start":{"row":0,"column":0},"end":{"row":137,"column":0},"action":"insert","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Terraform Init & Apply","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: \"store-management-app\"","      EB_ENV_NAME: \"store-management-env\"","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","      S3_BUCKET: \"your-eb-bucket\"  # Replace with your S3 bucket for EB deployments","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Upload Dockerrun to S3","        run: |","          aws s3 cp Dockerrun.aws.json s3://${S3_BUCKET}/Dockerrun.aws.json","","      - name: Create new EB application version","        run: |","          aws elasticbeanstalk create-application-version \\","            --application-name $EB_APP_NAME \\","            --version-label github-${GITHUB_SHA} \\","            --source-bundle S3Bucket=\"${S3_BUCKET}\",S3Key=\"Dockerrun.aws.json\"","","      - name: Update EB environment","        run: |","          aws elasticbeanstalk update-environment \\","            --environment-name $EB_ENV_NAME \\","            --version-label github-${GITHUB_SHA}",""]}],[{"start":{"row":98,"column":19},"end":{"row":98,"column":41},"action":"remove","lines":["\"store-management-app\""],"id":262},{"start":{"row":98,"column":19},"end":{"row":98,"column":51},"action":"insert","lines":["${{ secrets.AWS_SESSION_TOKEN }}"]}],[{"start":{"row":99,"column":19},"end":{"row":99,"column":41},"action":"remove","lines":["\"store-management-env\""],"id":263},{"start":{"row":99,"column":19},"end":{"row":99,"column":51},"action":"insert","lines":["${{ secrets.AWS_SESSION_TOKEN }}"]}],[{"start":{"row":98,"column":31},"end":{"row":98,"column":48},"action":"remove","lines":["AWS_SESSION_TOKEN"],"id":264},{"start":{"row":98,"column":31},"end":{"row":98,"column":42},"action":"insert","lines":["EB_APP_NAME"]}],[{"start":{"row":99,"column":31},"end":{"row":99,"column":48},"action":"remove","lines":["AWS_SESSION_TOKEN"],"id":265},{"start":{"row":99,"column":31},"end":{"row":99,"column":42},"action":"insert","lines":["EB_ENV_NAME"]}],[{"start":{"row":101,"column":17},"end":{"row":101,"column":83},"action":"remove","lines":["\"your-eb-bucket\"  # Replace with your S3 bucket for EB deployments"],"id":266},{"start":{"row":101,"column":17},"end":{"row":101,"column":43},"action":"insert","lines":["${{ secrets.EB_ENV_NAME }}"]}],[{"start":{"row":101,"column":29},"end":{"row":101,"column":40},"action":"remove","lines":["EB_ENV_NAME"],"id":267},{"start":{"row":101,"column":29},"end":{"row":101,"column":38},"action":"insert","lines":["S3_BUCKET"]}],[{"start":{"row":0,"column":0},"end":{"row":137,"column":0},"action":"remove","lines":["name: DevSecOps CI/CD","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args: >","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build & Push Docker Image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Terraform Init & Apply","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","  deploy-to-eb:","    runs-on: ubuntu-latest","    needs: infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: ${{ secrets.EB_APP_NAME }}","      EB_ENV_NAME: ${{ secrets.EB_ENV_NAME }}","      DOCKERHUB_IMAGE: \"${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest\"","      S3_BUCKET: ${{ secrets.S3_BUCKET }}","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Create Dockerrun.aws.json","        run: |","          echo '{","            \"AWSEBDockerrunVersion\": \"1\",","            \"Image\": {","              \"Name\": \"'\"${DOCKERHUB_IMAGE}\"'\",","              \"Update\": \"true\"","            },","            \"Ports\": [","              {","                \"ContainerPort\": \"8000\"","              }","            ]","          }' > Dockerrun.aws.json","","      - name: Upload Dockerrun to S3","        run: |","          aws s3 cp Dockerrun.aws.json s3://${S3_BUCKET}/Dockerrun.aws.json","","      - name: Create new EB application version","        run: |","          aws elasticbeanstalk create-application-version \\","            --application-name $EB_APP_NAME \\","            --version-label github-${GITHUB_SHA} \\","            --source-bundle S3Bucket=\"${S3_BUCKET}\",S3Key=\"Dockerrun.aws.json\"","","      - name: Update EB environment","        run: |","          aws elasticbeanstalk update-environment \\","            --environment-name $EB_ENV_NAME \\","            --version-label github-${GITHUB_SHA}",""],"id":268},{"start":{"row":0,"column":0},"end":{"row":105,"column":0},"action":"insert","lines":["name: DevSecOps CI","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }} ","        with:","          args:","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","    - uses: actions/checkout@v4","    - name: Set up Python ${{ matrix.python-version }}","      uses: actions/setup-python@v3","      with:","        python-version: ${{ matrix.python-version }}","    - name: Install Dependencies","      run: |","        python -m pip install --upgrade pip","        pip install -r requirements.txt","    - name: Run Tests","      run: |","        python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build and push Docker image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: \"us-east-1\"","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check if Elastic Beanstalk app exists","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Skip or Run Terraform","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped (EB already deployed)","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\" ",""]}],[{"start":{"row":0,"column":0},"end":{"row":105,"column":0},"action":"remove","lines":["name: DevSecOps CI","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }} ","        with:","          args:","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","","    steps:","    - uses: actions/checkout@v4","    - name: Set up Python ${{ matrix.python-version }}","      uses: actions/setup-python@v3","      with:","        python-version: ${{ matrix.python-version }}","    - name: Install Dependencies","      run: |","        python -m pip install --upgrade pip","        pip install -r requirements.txt","    - name: Run Tests","      run: |","        python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build and push Docker image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: \"us-east-1\"","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check if Elastic Beanstalk app exists","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"storemanagement-env\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Skip or Run Terraform","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform plan -out=tfplan","          terraform apply -auto-approve tfplan","","      - name: Terraform skipped (EB already deployed)","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\" ",""],"id":270},{"start":{"row":0,"column":0},"end":{"row":137,"column":0},"action":"insert","lines":["name: DevSecOps CI-CD EB","","on:","  push:","    branches: [ main ]","  pull_request:","    branches: [ main ]","","jobs:","","  sonar-cloud-build:","    runs-on: ubuntu-latest","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Analyze with SonarCloud","        uses: SonarSource/sonarcloud-github-action@v2","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","        with:","          args:","            -Dsonar.projectKey=Prayas-sharmaa_DevSecOps","            -Dsonar.organization=prayas-sharmaa","","  python-build:","    runs-on: ubuntu-latest","    needs: sonar-cloud-build","    strategy:","      matrix:","        python-version: ['3.10']","    steps:","      - uses: actions/checkout@v4","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: ${{ matrix.python-version }}","","      - name: Install Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Run Tests","        run: python manage.py test","","  docker-build:","    runs-on: ubuntu-latest","    needs: python-build","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Log in to Docker Hub","        uses: docker/login-action@v3","        with:","          username: ${{ secrets.DOCKERHUB_USERNAME }}","          password: ${{ secrets.DOCKERHUB_TOKEN }}","","      - name: Build and push Docker image","        uses: docker/build-push-action@v6","        with:","          context: .","          push: true","          tags: ${{ secrets.DOCKERHUB_USERNAME }}/storemanagement:latest","","  Infrastructure:","    runs-on: ubuntu-latest","    needs: docker-build","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install Terraform","        uses: hashicorp/setup-terraform@v3","","      - name: Check if Elastic Beanstalk environment exists","        id: ebe_check","        run: |","          if aws elasticbeanstalk describe-environments \\","              --region $AWS_REGION \\","              --environment-names \"${{ secrets.EB_ENV_NAME }}\" >/dev/null 2>&1; then","              echo \"exists=true\" >> $GITHUB_OUTPUT","          else","              echo \"exists=false\" >> $GITHUB_OUTPUT","          fi","","      - name: Run Terraform (first deployment only)","        if: steps.ebe_check.outputs.exists == 'false'","        run: |","          cd terraform","          terraform init","          terraform validate","          terraform apply -auto-approve","","      - name: Terraform Skipped","        if: steps.ebe_check.outputs.exists == 'true'","        run: echo \"Elastic Beanstalk already deployed — skipping Terraform.\"","","  deploy-eb:","    runs-on: ubuntu-latest","    needs: Infrastructure","    env:","      AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}","      AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","      AWS_SESSION_TOKEN: ${{ secrets.AWS_SESSION_TOKEN }}","      AWS_REGION: us-east-1","      EB_APP_NAME: ${{ secrets.EB_APP_NAME }}","      EB_ENV_NAME: ${{ secrets.EB_ENV_NAME }}","","    steps:","      - name: Checkout code","        uses: actions/checkout@v4","","      - name: Install EB CLI","        run: |","          pip install awsebcli","","      - name: Initialize EB CLI","        run: |","          eb init \"$EB_APP_NAME\" \\","            --platform \"Docker\" \\","            --region \"$AWS_REGION\" \\","            --keypair \"eb-key\"","      ","      - name: Set EB environment","        run: |","          eb use \"$EB_ENV_NAME\"","","      - name: Deploy to Elastic Beanstalk","        run: eb deploy \"$EB_ENV_NAME\"",""]}]]},"ace":{"folds":[],"scrolltop":1560,"scrollleft":0,"selection":{"start":{"row":137,"column":0},"end":{"row":137,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":110,"state":"start","mode":"ace/mode/yaml"}},"timestamp":1765123163168,"hash":"f845655154860039459f227ff2ef86f32c7a1884"}