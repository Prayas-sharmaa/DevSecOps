{"filter":false,"title":"inventory_eb_ssm.py","tooltip":"/ansible/inventory_eb_ssm.py","ace":{"folds":[],"scrolltop":120,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":45,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"92ab727c729ed2cf52ac2b699b956de5cdadabfe","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":45,"column":0},"action":"insert","lines":["#!/usr/bin/env python3","import json","import subprocess","import sys","","","EB_ENV_NAME = \"store-management-env\"   # <<< change if needed","","","def get_instance_ids():","    try:","        result = subprocess.check_output([","            \"aws\", \"elasticbeanstalk\", \"describe-environment-resources\",","            \"--environment-name\", EB_ENV_NAME,","            \"--query\", \"EnvironmentResources.Instances[*].Id\",","            \"--output\", \"json\"","        ])","        return json.loads(result)","    except Exception as e:","        print(json.dumps({}))","        sys.exit(1)","","","def main():","    if \"--list\" in sys.argv:","        instance_ids = get_instance_ids()","","        inventory = {","            \"_meta\": {","                \"hostvars\": {}","            },","            \"eb\": {","                \"hosts\": instance_ids","            }","        }","","        print(json.dumps(inventory, indent=2))","    elif \"--host\" in sys.argv:","        print(json.dumps({}))","    else:","        print(json.dumps({}))","","","if __name__ == \"__main__\":","    main()",""],"id":1}]]},"timestamp":1765062372492}