{"filter":false,"title":"configure_datadog.yml","tooltip":"/ansible/playbooks/configure_datadog.yml","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":0,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["---","- name: Configure Datadog Agent on Elastic Beanstalk EC2","  hosts: eb_instances","  become: yes","","  vars:","    datadog_api_key: \"{{ lookup('env', 'DATADOG_API_KEY') }}\"","","  roles:","    - datadog",""],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":10,"column":0},"action":"remove","lines":["---","- name: Configure Datadog Agent on Elastic Beanstalk EC2","  hosts: eb_instances","  become: yes","","  vars:","    datadog_api_key: \"{{ lookup('env', 'DATADOG_API_KEY') }}\"","","  roles:","    - datadog",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":29,"column":0},"action":"insert","lines":["---","- name: Configure Datadog Agent on Elastic Beanstalk EC2 instances","  hosts: eb_instances","  become: yes","","  vars:","    datadog_api_key: \"{{ lookup('env', 'DATADOG_API_KEY') }}\"","    datadog_site: \"datadoghq.com\"","","  roles:","    - datadog.datadog","","  vars:","    datadog_config:","      logs_enabled: true","      process_config:","        enabled: \"true\"","","    datadog_agent_major_version: 7","","    datadog_checks:","      system_core:","        init_config:","        instances:","          - {}","","    datadog_additional_groups:","      - adm","      - syslog",""]}],[{"start":{"row":0,"column":0},"end":{"row":29,"column":0},"action":"remove","lines":["---","- name: Configure Datadog Agent on Elastic Beanstalk EC2 instances","  hosts: eb_instances","  become: yes","","  vars:","    datadog_api_key: \"{{ lookup('env', 'DATADOG_API_KEY') }}\"","    datadog_site: \"datadoghq.com\"","","  roles:","    - datadog.datadog","","  vars:","    datadog_config:","      logs_enabled: true","      process_config:","        enabled: \"true\"","","    datadog_agent_major_version: 7","","    datadog_checks:","      system_core:","        init_config:","        instances:","          - {}","","    datadog_additional_groups:","      - adm","      - syslog",""],"id":3},{"start":{"row":0,"column":0},"end":{"row":28,"column":0},"action":"insert","lines":["---","- name: Configure Datadog Agent on Elastic Beanstalk EC2 instances","  hosts: eb","  gather_facts: False","  connection: aws_ssm","","  vars:","    datadog_api_key: \"{{ lookup('env', 'DATADOG_API_KEY') }}\"","","  tasks:","    - name: Install Datadog Agent","      ansible.builtin.shell: |","        sudo yum install -y datadog-agent","      become: yes","","    - name: Configure Datadog API key","      ansible.builtin.lineinfile:","        path: /etc/datadog-agent/datadog.yaml","        regexp: '^api_key:'","        line: \"api_key: {{ datadog_api_key }}\"","      become: yes","","    - name: Restart Datadog Agent","      ansible.builtin.systemd:","        name: datadog-agent","        state: restarted","        enabled: yes","      become: yes",""]}],[{"start":{"row":2,"column":2},"end":{"row":4,"column":21},"action":"remove","lines":["hosts: eb","  gather_facts: False","  connection: aws_ssm"],"id":4},{"start":{"row":2,"column":2},"end":{"row":6,"column":0},"action":"insert","lines":["- hosts: eb","  gather_facts: yes","  connection: amazon.aws.aws_ssm","  become: yes",""]}],[{"start":{"row":2,"column":3},"end":{"row":2,"column":4},"action":"remove","lines":[" "],"id":5},{"start":{"row":2,"column":2},"end":{"row":2,"column":3},"action":"remove","lines":["-"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":2,"column":2},"end":{"row":2,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1765062663473,"hash":"fd539f705dd3a7dece08465a52ea7a42987741b9"}